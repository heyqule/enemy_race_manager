---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 5/3/2024 7:34 PM
--- Clear old data
---

local Queue = require('__stdlib__/stdlib/misc/queue')

global.attack_group_spawnable_chunk = nil
global.attack_group_attackable_chunk = nil
global.attack_group_surface_data = nil
global.attack_group_valid_targets = nil

-- Clear up invalid groups
for id, content in pairs(global.erm_unit_groups) do
    if (type(content) == 'table' and content.valid == false) or
        content.group_number or
        content.group == nil or
        content.group.valid == false
    then
        global.erm_unit_groups[id] = nil
    else
        global.erm_unit_groups[id].nearby_retry = 0
        global.erm_unit_groups[id].created = game.tick
        global.erm_unit_groups[id].is_aerial = false
    end
end

--- wipe queue due to function param order changes
global.one_second_cron = Queue()

--- When wiping an existing cron job, purge related trackers to prevent the feature being stuck.
global.group_tracker = {}

--- Reindex all attack-able entities on existing game, since the base is likely walled off.
global.attack_beacon_index_all = true

--- Fix duplicated names
global.attack_group_attackable_entity_names = {}