---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 8/4/2023 12:02 AM
---


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 2/5/2023 2:24 PM
---
local noise = require("noise")
local String = require('__stdlib__/stdlib/utils/string')
local AutoplaceHelper = require('__enemyracemanager__/lib/helper/autoplace_helper')
local ErmConfig = require('__enemyracemanager__/lib/global_config')
local AutoplaceUtil = require('__enemyracemanager__/lib/enemy-autoplace-utils')
require('global')

local tune_autoplace = function(v, is_turret, volume, mod_name, force_name, distance)
    if String.find( v.name, mod_name, 1, true) and v.autoplace then
        if is_turret then
            v.autoplace = AutoplaceUtil.enemy_worm_autoplace(distance, force_name, volume, 2)
        else
            v.autoplace = AutoplaceUtil.enemy_spawner_autoplace(0, force_name, volume, 2)
        end
    end
end
------------
---moisture, -- 1 = Wet and 2 = Dry
---aux, 1 = red desert, 2 = sand
---elevation, 1,2,3 (1 low elevation, 2. medium, 3 high elavation)
---temperature, 1,2,3 (1 cold, 2. normal, 3 hot)
-------------
local temperature_range = {12,18} --- {12-14,14-16,16-18}
local elevation_range = {0,70} --- {0-30,20-50,40-70}
if mods['alien-biomes'] then
    temperature_range = {-20,150} --- {-20-60,10-90,70-150}
end

local distances = {
    medium = 2,
    big = 5,
    behemoth = 8,
    leviathan = 16,
    mother = 32
}

if ErmConfig.mapgen_is_mixed() then
    local volume = nil
    local erm_race_data = data.erm_enemy_races
    local active_races = table_size(erm_race_data)
    log(serpent.block(erm_race_data))
    --
    --if active_races >= 2  then
    --    volume = {
    --        moist ure_min = 0,
    --        moisture_max = 0.51,
    --    }
    --
    --    if settings.startup['enemyracemanager-enable-bitters'].value and erm_races['erm_zerg'] and active_races > 2 then
    --        volume.aux_min = 0.59
    --        volume.aux_max = 1
    --    elseif erm_races['erm_zerg'] and active_races > 2 then
    --        volume.aux_min = 0.49
    --        volume.aux_max = 1
    --    elseif erm_races['erm_redarmy'] and active_races == 2 then
    --        volume.moisture_min = 0.49
    --        volume.moisture_max = 1
    --    end
    --
    --elseif settings.startup['enemyracemanager-enable-bitters'].value and active_races == 1 then
    --    volume = {
    --        water_min = 0,
    --        water_max = 0.51,
    --    }
    --end
    --
    --if volume then
    --    for _, v in pairs(data.raw["unit-spawner"]) do
    --        tune_autoplace(v, false, volume)
    --    end
    --
    --    for _, v in pairs(data.raw["turret"]) do
    --        tune_autoplace(v, true, volume)
    --    end
    --end
end
