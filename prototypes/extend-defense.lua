---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 7/1/2021 1:23 PM
---
-- Change resistance values on vanilla armors
local armor_change_resistance = function(percentage_value, fixed_value)
    return {
        { type = "acid", percent = percentage_value, decrease = fixed_value },
        { type = "poison", percent = percentage_value, decrease = fixed_value },
        { type = "physical", percent = percentage_value, decrease = fixed_value },
        { type = "fire", percent = percentage_value, decrease = fixed_value },
        { type = "explosion", percent = percentage_value, decrease = fixed_value * 3 },
        { type = "laser", percent = percentage_value, decrease = fixed_value },
        { type = "electric", percent = percentage_value, decrease = fixed_value },
        { type = "cold", percent = percentage_value, decrease = fixed_value }
    }
end

local vehicle_change_resistance = function(percentage_value, fixed_value)
    return {
        { type = "acid", percent = percentage_value, decrease = fixed_value },
        { type = "poison", percent = percentage_value, decrease = fixed_value },
        { type = "physical", percent = percentage_value, decrease = fixed_value },
        { type = "fire", percent = percentage_value, decrease = fixed_value },
        { type = "explosion", percent = percentage_value, decrease = fixed_value * 5 },
        { type = "laser", percent = percentage_value, decrease = fixed_value },
        { type = "electric", percent = percentage_value, decrease = fixed_value },
        { type = "cold", percent = percentage_value, decrease = fixed_value },
        { type = "impact", percent = 90, decrease = 50 },
    }
end

local rails_change_resistance = function()
    return {
        { type = "acid", percent = 80},
        { type = "poison", percent = 100},
        { type = "physical", percent = 50},
        { type = "fire", percent = 100},
        { type = "explosion", percent = 50},
        { type = "laser", percent = 50},
        { type = "cold", percent = 100},
        { type = "electric", percent = 100}
    }
end

-- Enhance Vanilla Defenses
if settings.startup['enemyracemanager-enhance-defense'].value == true then

    -- Buff Armor
    data.raw['armor']['light-armor']['resistances'] = armor_change_resistance(25, 5)
    data.raw['armor']['heavy-armor']['resistances'] = armor_change_resistance(30, 10)
    data.raw['armor']['modular-armor']['resistances'] = armor_change_resistance(40, 15)
    data.raw['armor']['power-armor']['resistances'] = armor_change_resistance(55, 20)
    data.raw['armor']['power-armor-mk2']['resistances'] = armor_change_resistance(75, 20)

    -- Buff gun turret HP
    data.raw['ammo-turret']['gun-turret']['max_health'] = 800

    -- Buff vehicles
    data.raw['car']['car']['max_health'] = 750
    data.raw['car']['car']['resistances'] = vehicle_change_resistance(50, 0)
    data.raw['car']['tank']['resistances'] = vehicle_change_resistance(75, 20)
    data.raw['spider-vehicle']['spidertron']['resistances'] = vehicle_change_resistance(75, 5)

    -- Buff vehicle gun
    data.raw['gun']['vehicle-machine-gun']['attack_parameters']['damage_modifier'] = 1.5
    data.raw['gun']['tank-machine-gun']['attack_parameters']['damage_modifier'] = 2
    data.raw['gun']['tank-flamethrower']['attack_parameters']['damage_modifier'] = 2
    data.raw['gun']['tank-cannon']['attack_parameters']['damage_modifier'] = 2

    -- Buff train
    data.raw['locomotive']['locomotive']['resistances'] = vehicle_change_resistance(75, 15)
    data.raw['cargo-wagon']['cargo-wagon']['resistances'] = vehicle_change_resistance(75, 15)
    data.raw['fluid-wagon']['fluid-wagon']['resistances'] = vehicle_change_resistance(75, 15)
    data.raw['artillery-wagon']['artillery-wagon']['resistances'] = vehicle_change_resistance(75, 15)

    data.raw['straight-rail']['straight-rail']['resistances'] = rails_change_resistance()
    data.raw['curved-rail']['curved-rail']['resistances'] = rails_change_resistance()

    -- Buff Wall
    data.raw['wall']['stone-wall']['max_health'] = 500
    data.raw['wall']['stone-wall']['resistances'] = {
        { type = "acid", percent = 50, decrease = 0 },
        { type = "poison", percent = 100, decrease = 0 },
        { type = "physical", percent = 50, decrease = 0 },
        { type = "fire", percent = 100, decrease = 0 },
        { type = "explosion", percent = 60, decrease = 10 },
        { type = "impact", percent = 60, decrease = 45 },
        { type = "laser", percent = 30, decrease = 0 },
        { type = "electric", percent = 100, decrease = 0 },
        { type = "cold", percent = 100, decrease = 0 }
    }

    -- Buff Robots
    data.raw['construction-robot']['construction-robot']['max_health'] = 200
    data.raw['construction-robot']['construction-robot']['resistances'] = armor_change_resistance(75, 0)
    data.raw['logistic-robot']['logistic-robot']['max_health'] = 200
    data.raw['logistic-robot']['logistic-robot']['resistances'] = armor_change_resistance(75, 0)
end