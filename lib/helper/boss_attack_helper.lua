---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 8/28/2022 9:34 PM
---

local ErmRaceSettingsHelper = require('__enemyracemanager__/lib/helper/race_settings_helper')
local ErmBossAttackProcessor = require('__enemyracemanager__/lib/boss_attack_processor')

local BossAttacks = {}

--Example:
--BossAttacks.basic_attacks =
--{
--    projectile_name = {'blood-cloud','acid-cloud','blood-fire'},
--    projectile_type = {
--        ErmBossAttackProcessor.TYPE_PROJECTILE,
--        ErmBossAttackProcessor.TYPE_PROJECTILE,
--        ErmBossAttackProcessor.TYPE_PROJECTILE
--    },
--    projectile_chance = {25, 25, 100},
--    projectile_count = {1, 1, 1},
--    projectile_spread = {1, 1, 2}
--}
BossAttacks.basic_attacks = {}
BossAttacks.advanced_attacks = {}
BossAttacks.super_attacks = {}
BossAttacks.phases = {}

local can_spawn = ErmRaceSettingsHelper.can_spawn

local select_attack = function(attacks, tier)
    local data
    for i, value in pairs(attacks['projectile_name']) do
        if can_spawn(attacks['projectile_chance'][i]) then
            data = {
                entity_name = MOD_NAME..'/'..value..'-'..attacks['projectile_type'][i]..'-t'..tier,
                count = attacks['projectile_count'][i],
                spread = attacks['projectile_spread'][i],
                type = attacks['projectile_type'][i]
            }
            break
        end
    end
    return data
end

function BossAttacks.get_basic_attack(tier)
    local attacks = BossAttacks.basic_attacks
    return select_attack(attacks, tier)
end

function BossAttacks.get_advanced_attack(tier)
    local attacks = BossAttacks.advanced_attacks
    return select_attack(attacks, tier)
end

function BossAttacks.get_super_attack(tier)
    local attacks = BossAttacks.advanced_attacks
    return select_attack(attacks, tier)
end

return BossAttacks