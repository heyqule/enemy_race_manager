---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 8/8/2021 10:34 PM
---
local ErmForceHelper = require('__enemyracemanager__/lib/helper/force_helper')

local Compat_NewGamePlus = {}

function Compat_NewGamePlus.exec(event)
    for name, race_settings in pairs(global.race_settings) do
        if event.tech_reset == true then
            race_settings.level = 1
            race_settings.tier = 1
            race_settings.global_evolution_point = 0
            race_settings.current_units_tier = race_settings.units[1]
            race_settings.current_turrets_tier = race_settings.turrets[1]
            race_settings.current_command_centers_tier = race_settings.command_centers[1]
            race_settings.current_support_structures_tier = race_settings.support_structures[1]
        elseif game.forces[ErmForceHelper.get_force_name_from(race_settings.race)].evolution_factor == 0 then
            race_settings.evolution_base_point = race_settings.global_evolution_point
        end

        race_settings.attack_meter = 0
    end
end

return Compat_NewGamePlus