---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 2/15/2022 9:47 PM
---
local Event = require('__stdlib__/stdlib/event/event')

require('__stdlib__/stdlib/utils/defines/time')
require('__enemyracemanager__/global')

local ErmConfig = require('__enemyracemanager__/lib/global_config')
local ErmRaceSettingHelper = require('__enemyracemanager__/lib/helper/race_settings_helper')

local attack_functions = {
    [PLAYER_SUPER_WEAPON_ATTACK] = function(args)
        local races = ErmConfig.get_enemy_races()
        ErmRaceSettingHelper.add_to_attack_meter(races[math.random(1, ErmConfig.get_enemy_races_total())], ErmConfig.super_weapon_attack_points())
    end,
    [PLAYER_PLANET_PURIFIER_ATTACK] = function(args)
        local races = ErmConfig.get_enemy_races()
        ErmRaceSettingHelper.add_to_attack_meter(races[math.random(1, ErmConfig.get_enemy_races_total())], ErmConfig.super_weapon_attack_points() * 5)
    end
}
Event.register(defines.events.on_script_trigger_effect, function(event)
    if ErmConfig.super_weapon_attack_points_enable() and attack_functions[event.effect_id]
    then
        attack_functions[event.effect_id](event)
    end
end)