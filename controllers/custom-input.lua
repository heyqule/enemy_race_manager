---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by heyqule.
--- DateTime: 11/17/2022 9:11 PM
---
local Event = require('__stdlib__/stdlib/event/event')
require('__stdlib__/stdlib/utils/defines/time')

local ErmArmyControlUI = require('__enemyracemanager__/gui/army_control_window')

local valid_erm_left_click = {
    ['radar'] = function(event)
        print('setting FROM radar')
        local player =  game.players[event.player_index]

        if player and player.valid and global.army_registered_command_centers[event.selected_prototype.name] then
            local entity = game.surfaces[1].find_entity(event.selected_prototype.name, event.cursor_position)
            ErmArmyControlUI.open_tab(player, ErmArmyControlUI.tab_names[3])
            if entity then
                print(entity.is_connected_to_electric_network())
                print(entity.radar_scan_progress)
                print(entity.energy)
                print(entity.electric_buffer_size)
            end
        end
    end,
    ['assembling-machine'] = function(event)
        print('processing auto deployer')
    end
}


Event.register('erm-left-click', function(event)
    if event.selected_prototype and valid_erm_left_click[event.selected_prototype.derived_type] then
        valid_erm_left_click[event.selected_prototype.derived_type](event)
    end
end)

local valid_erm_right_click = {
    ['radar'] = function(event)
        print('setting TO radar')
        local player =  game.players[event.player_index]

        if player and player.valid and global.army_registered_command_centers[event.selected_prototype.name] then
            local entity = game.surfaces[1].find_entity(event.selected_prototype.name, event.cursor_position)
            ErmArmyControlUI.open_tab(player, ErmArmyControlUI.tab_names[3])
        end
    end,
    ['assembling-machine'] = function(event)
        print('processing auto deployer')
    end
}


Event.register('erm-alt-left-click', function(event)
    if event.selected_prototype and valid_erm_right_click[event.selected_prototype.derived_type] then
        valid_erm_right_click[event.selected_prototype.derived_type](event)
    end
end)

Event.register('erm-open-army-window', function(event)
    if game.players[event.player_index] then
        ErmArmyControlUI.toggle_main_window(game.players[event.player_index])
    end
end)

